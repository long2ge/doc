### 备份和恢复
1. mongodump 备份
2. mongorestore 恢复
3. mongoexport 导出
4. mongoimport 导入

### 固定集合
1. 在创建集合的时候指定了集合的大小
2. 固定集合很像环形队列，如果空间不足，最早的文档就会被删除，为新的文档腾出空间。一般来说，固定集合适用于任何想要自动淘汰过期属性的场景，没有太多的操作限制。


### 安全和认证
1. 每个mongoDB实例中数据库都可以有许多用户。如果开启了安全性检查，则只有数据库认证用户才能执行读或者写操作。
2. 在认证上下文中，MongoDB会将普通的数据作为admin数据库处理。admin数据库中的用户视为超级用户（管理员）。
3. 在安全检查开启之前，一定要至少一个管理员账号。


### 集群
副本集 ： 副本集就是有自动故障恢复功能的主从集群。主从集群和副本集最大的区别就是副本集没有固定的主节点；
整个集群会选出一个主节点，当其挂掉后，又在剩下的从节点中选出其他节点为主节点。副本集总有一个活跃点（ primary ）和一个
或者多个备份节点（ secondary ）

我们以后在实际的部署环境中，一个节点有可能充当多个角色，在主从复制里面是从节点，在副本集里面是备份节点。

### 分片
1. 分片是指将数据拆分，将其拆分存在不同的机器上的过程。有时也用分区（partitioning）来表示整个概念。将数据分散到不同的机器上，不需要功能强大的大型
计算机就可以存储更多的数据，处理更多的负载。
2. MongoDB分片的基本思想就是将集合切分小块。这些块分散到若干片里面，每个片只负责总数据里面的一部分。
3. 应用程序不必知道那片对应那些数据，甚至不需要知道数据已经被拆分了，所以在分片之前要运行一个路由进程，叫mongos。
4. 这个路由器知道所有数据的存放位置，所以应用可以连接它来正常发送请求。
5. 片键 ： 用来作为数据拆分的依据。
6. 配置信息中可以设置数据与分片的对应关系。
7. 开启数据库分片功能，enablesharding() 命令

### 索引
1. 哈希索引，无法做范围查询进行优化，适合随时性强的散列。
2. 重建索引，一个表经过很多次修改后，导致表的文件产生空洞，索引文件也是如此。可以通过索引的重建，来提高索引的效率。类似mysql中的optimize table
3. 唯一索引。
4. 密集索引
mongodb索引默认是密集型的。在一个有索引的集合里，每个文档都会有对应的索引项，哪怕文档中没有被索引键也是如此。例如，给文档的name字段建索引，而有的文档并没有name字段，那么name字段索引里会有null值，可以这样查询name为null值的文档：db.products.find({name: null})。
5. 稀疏索引
在稀疏索引里，只会出现被索引键有值的文档。如果想创建稀疏索引，指定{sparse: true}就可以了。例如，可以像下面这样在name上创建一个唯一性稀疏索引：
db.products.ensureIndex({name: 1}, {unique: true, sparse: true})
6. 比较
两种情况下不太适合使用默认的密集型索引：
一种是希望在并非出现在集合所有文档内的字段上增加唯一性索引时。举例来说，你明确希望在每个产品的sku字段上增加唯一性索引。但是出于某些原因，假设产品在还未分配sku时就加入系统了。如果sku字段上有唯一性索引，而你希望插入多个没有sku的产品，那么第一次插入会成功，但后续插入都会失败，因为索引里已经存在一个sku为null的项了。这种情况下密集型索引并不适合，你所需要的是稀疏索引（sparse index）。
另一种适用稀疏索引的情况：集合中大量文档都不包含被索引键。例如，假设允许对电子商务网站进行匿名评论。这种情况下，半数评论都可能缺少user_id字段，如果那个字段上有索引，那么该索引中一半的项都会是null。出于两个原因，这种情况的效率会很差。第一，这会增加索引的大小。第二，在添加和删除带null值user_id字段的文档时也要求更新索引。
如果很少（或不会）对匿名评论进行查询，那么可以选择在user_id上构建一个稀疏索引。
